---
layout: default
---
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ site.title }}</title>
    <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
</head>
<body>
    {% include header.html %}
    
    <!-- Main Navigation Tabs -->
    <nav class="main-nav">
        <div class="container">
            <div class="tab-navigation">
                <button class="tab-btn active" data-tab="video" id="video-tab-btn">
                    {% assign default_lang = site.data.en %}
                    {{ default_lang.nav_labels.video_tab }}
                </button>
                <button class="tab-btn" data-tab="resume" id="resume-tab-btn">
                    {{ default_lang.nav_labels.resume_tab }}
                </button>
            </div>
        </div>
    </nav>

    <main>
        <!-- Video Tab Content -->
        <div id="video-tab-content" class="tab-content active">
            <div class="container">
                <div class="video-container">
                    <video id="intro-video" controls width="100%" muted autoplay>
                        <source src="{{ site.data.en.video_path | relative_url }}" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                </div>
            </div>
        </div>

        <!-- Resume Tab Content -->
        <div id="resume-tab-content" class="tab-content">
            <div class="container">
                <div class="resume-content" id="resume-content">
                    {% assign default_resume = site.pages | where: "path", "assets/resumes/resume-en.md" | first %}
                    {{ default_resume.content | markdownify }}
                </div>
                <div class="download-section">
                    <a href="{{ site.data.en.pdf_path | relative_url }}" class="download-pdf-btn" id="download-pdf-btn" download>
                        {{ site.data.en.button_labels.download_pdf }}
                    </a>
                </div>
            </div>
        </div>
    </main>

    {% include footer.html %}

    <script>
        // Global language management and tab switching
        document.addEventListener('DOMContentLoaded', function() {
            // Elements
            const tabButtons = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');
            const languageButtons = document.querySelectorAll('.language-btn');
            const videoElement = document.getElementById('intro-video');
            const resumeContent = document.getElementById('resume-content');
            const downloadPdfBtn = document.getElementById('download-pdf-btn');
            const videoTabBtn = document.getElementById('video-tab-btn');
            const resumeTabBtn = document.getElementById('resume-tab-btn');

            // Language data mapping
            const languageData = {
                'en': {
                    nav_labels: {
                        video_tab: 'Video Introduction',
                        resume_tab: 'Resume'
                    },
                    button_labels: {
                        download_pdf: 'Download PDF Resume'
                    },
                    video_path: '{{ site.data.en.video_path | relative_url }}',
                    pdf_path: '{{ site.data.en.pdf_path | relative_url }}'
                },
                'es': {
                    nav_labels: {
                        video_tab: 'Introducción en Video',
                        resume_tab: 'Currículum'
                    },
                    button_labels: {
                        download_pdf: 'Descargar PDF del Currículum'
                    },
                    video_path: '{{ site.data.es.video_path | relative_url }}',
                    pdf_path: '{{ site.data.es.pdf_path | relative_url }}'
                },
                'pt': {
                    nav_labels: {
                        video_tab: 'Introdução em Vídeo',
                        resume_tab: 'Currículo'
                    },
                    button_labels: {
                        download_pdf: 'Baixar PDF do Currículo'
                    },
                    video_path: '{{ site.data.pt.video_path | relative_url }}',
                    pdf_path: '{{ site.data.pt.pdf_path | relative_url }}'
                }
            };

            // Get or set default language
            function getCurrentLanguage() {
                return localStorage.getItem('selectedLanguage') || 'en';
            }

            function setCurrentLanguage(lang) {
                localStorage.setItem('selectedLanguage', lang);
            }

            // Get current active tab
            function getCurrentTab() {
                return localStorage.getItem('activeTab') || 'video';
            }

            function setCurrentTab(tab) {
                localStorage.setItem('activeTab', tab);
            }

            // Tab switching logic
            function switchTab(tabName) {
                // Update tab buttons
                tabButtons.forEach(btn => {
                    if (btn.getAttribute('data-tab') === tabName) {
                        btn.classList.add('active');
                    } else {
                        btn.classList.remove('active');
                    }
                });

                // Update tab contents
                tabContents.forEach(content => {
                    if (content.id === tabName + '-tab-content') {
                        content.classList.add('active');
                    } else {
                        content.classList.remove('active');
                    }
                });

                setCurrentTab(tabName);
            }

            // Language switching logic
            function switchLanguage(lang) {
                const data = languageData[lang];
                if (!data) return;

                // Update tab labels
                videoTabBtn.textContent = data.nav_labels.video_tab;
                resumeTabBtn.textContent = data.nav_labels.resume_tab;

                // Update download button
                downloadPdfBtn.textContent = data.button_labels.download_pdf;
                downloadPdfBtn.href = data.pdf_path;

                // Update video if video tab is active
                if (getCurrentTab() === 'video') {
                    const currentTime = videoElement.currentTime;
                    videoElement.querySelector('source').src = data.video_path;
                    videoElement.load();
                    videoElement.currentTime = currentTime;
                    videoElement.play().catch(e => console.log('Autoplay prevented:', e));
                }

                // Note: Resume content is pre-rendered server-side for each language
                // The content doesn't change dynamically due to Jekyll static generation

                // Update active language button
                languageButtons.forEach(btn => {
                    if (btn.getAttribute('data-lang') === lang) {
                        btn.classList.add('active');
                    } else {
                        btn.classList.remove('active');
                    }
                });

                setCurrentLanguage(lang);
            }

            // Initialize
            function initialize() {
                const currentLang = getCurrentLanguage();
                const currentTab = getCurrentTab();

                // Set initial language
                switchLanguage(currentLang);
                
                // Set initial tab
                switchTab(currentTab);
            }

            // Event listeners
            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    switchTab(tabName);
                });
            });

            languageButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const lang = this.getAttribute('data-lang');
                    switchLanguage(lang);
                });
            });

            // Initialize the application
            initialize();
        });
    </script>
</body>
</html>